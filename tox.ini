[tox]
envlist = py{39,310,311,312,313}, lint, docs

[testenv]
description = Run tests with pytest
deps =
    pytest>=7.0
    build
commands =
    pytest tests/test_backend.py {posargs}

[testenv:integration]
description = Run integration tests
deps =
    pytest>=7.0
    build
commands =
    pytest tests/test_integration.py -v {posargs}

[testenv:lint]
description = Run linting with ruff
skip_install = true
deps =
    ruff>=0.9
commands =
    ruff check .
    ruff format --check .

[testenv:docs]
description = Build documentation with Sphinx
extras = docs
changedir = docs
commands =
    sphinx-build -W -b html . _build/html

[testenv:build]
description = Build package and check with twine
skip_install = true
deps =
    build
    twine
commands =
    python -m build
    twine check dist/*
