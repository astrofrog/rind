[tox]
envlist = py{39,310,311,312,313}-{test,integration}, lint, docs

[testenv]
description =
    test: Run tests with pytest
    integration: Run integration tests
extras = test
commands =
    test: pytest tests/test_backend.py {posargs}
    integration: pytest tests/test_integration.py -v {posargs}

[testenv:lint]
description = Run linting with ruff
skip_install = true
deps =
    ruff>=0.9
commands =
    ruff check .
    ruff format --check .

[testenv:docs]
description = Build documentation with Sphinx
extras = docs
changedir = docs
commands =
    sphinx-build -W -b html . _build/html

[testenv:build]
description = Build package and check with twine
skip_install = true
deps =
    build
    twine
commands =
    python -m build
    twine check dist/*
